# Runtime library

file(GLOB_RECURSE SOURCE_FILES "${CMAKE_CURRENT_SOURCE_DIR}/*.cpp")
file(GLOB_RECURSE HEADER_FILES "${CMAKE_CURRENT_SOURCE_DIR}/*.h")

add_library(Runtime ${SOURCE_FILES} ${HEADER_FILES})

set(RUNTIME_INCLUDE_DIRS "${CMAKE_CURRENT_SOURCE_DIR}")
set(RUNTIME_COMPILE_DEFINITIONS
	$<$<CONFIG:Debug>:WI_DEBUG>
	$<$<CONFIG:Release>:WI_RELEASE>
	UNICODE
)
set(RUNTIME_LINK_LIBS "")

if(WIN32)
	list(APPEND RUNTIME_COMPILE_DEFINITIONS WI_PLATFORM_WIN)
elseif(UNIX)
	list(APPEND RUNTIME_COMPILE_DEFINITIONS WI_PLATFORM_LINUX)
	list(APPEND RUNTIME_LINK_LIBS xcb xcb-keysyms)
endif()

target_include_directories(Runtime PUBLIC ${RUNTIME_INCLUDE_DIRS})
target_compile_definitions(Runtime PUBLIC ${RUNTIME_COMPILE_DEFINITIONS})
target_link_libraries(Runtime PRIVATE ${RUNTIME_LINK_LIBS})

source_group(TREE ${CMAKE_CURRENT_SOURCE_DIR} FILES ${SOURCE_FILES} ${HEADER_FILES})
